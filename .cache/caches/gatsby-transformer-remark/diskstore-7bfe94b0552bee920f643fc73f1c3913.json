{"expireTime":9007200846134246000,"key":"transformer-remark-markdown-html-ast-a478452975affe27be915102c4705f29-gatsby-remark-katexgatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants-","val":{"type":"root","children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"I was not present for Lecture 18, which did not get recorded, unfortunately. Thus, this will focus on Lecture 18/19’s content, but might be a bit less on-topic than other lectures.","position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":1,"column":181,"offset":180}}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":1,"column":181,"offset":180}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"So last time, we had talked about reasoning equationally w/ side effects on memory.","position":{"start":{"line":3,"column":1,"offset":182},"end":{"line":3,"column":84,"offset":265}}}],"position":{"start":{"line":3,"column":1,"offset":182},"end":{"line":3,"column":84,"offset":265}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"We want to reason about our functions in some way still, but now we have two separate behaviors to account for:","position":{"start":{"line":5,"column":1,"offset":267},"end":{"line":5,"column":112,"offset":378}}}],"position":{"start":{"line":5,"column":1,"offset":267},"end":{"line":5,"column":112,"offset":378}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"The functions I/O behavior, which we can reason equationally with using our traditional approach whenever possible","position":{"start":{"line":7,"column":3,"offset":382},"end":{"line":7,"column":117,"offset":496}}}],"position":{"start":{"line":7,"column":1,"offset":380},"end":{"line":7,"column":117,"offset":496}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"The functions side-effects, which we can reason about by specifying pre-conditions and post-conditions","position":{"start":{"line":8,"column":3,"offset":499},"end":{"line":8,"column":105,"offset":601}}}],"position":{"start":{"line":8,"column":1,"offset":497},"end":{"line":8,"column":105,"offset":601}}},{"type":"text","value":"\n"}],"position":{"start":{"line":7,"column":1,"offset":380},"end":{"line":8,"column":105,"offset":601}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"As an example, we can consider the following:","position":{"start":{"line":10,"column":1,"offset":603},"end":{"line":10,"column":46,"offset":648}}}],"position":{"start":{"line":10,"column":1,"offset":603},"end":{"line":10,"column":46,"offset":648}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"ocaml\"><pre class=\"language-ocaml\"><code class=\"language-ocaml\"><span class=\"token keyword\">let</span> counter <span class=\"token operator\">=</span> ref <span class=\"token number\">0</span> <span class=\"token keyword\">in</span>\n  <span class=\"token keyword\">let</span> tick <span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">:</span> int<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> \n   counter <span class=\"token operator\">:=</span> <span class=\"token operator\">!</span>counter <span class=\"token operator\">+</span> n\n<span class=\"token punctuation\">(</span><span class=\"token module variable\">Where</span> tick has <span class=\"token keyword\">type</span> int <span class=\"token operator\">-></span> unit<span class=\"token punctuation\">)</span></code></pre></div>","position":{"start":{"line":12,"column":1,"offset":650},"end":{"line":17,"column":4,"offset":769}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"From here, if we only looked at the functional behavior of tick, we could get the following theorem:","position":{"start":{"line":19,"column":1,"offset":771},"end":{"line":19,"column":101,"offset":871}}}],"position":{"start":{"line":19,"column":1,"offset":771},"end":{"line":19,"column":101,"offset":871}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"raw","value":"<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">∀</mi><mtext> valuable n : int, tick n </mtext><mo>≅</mo><mtext> ()</mtext></mrow><annotation encoding=\"application/x-tex\">\\forall \\text{ valuable n : int, tick n }\\cong\\text{ ()}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\">∀</span><span class=\"mord text\"><span class=\"mord\"> valuable n : int, tick n </span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≅</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord text\"><span class=\"mord\"> ()</span></span></span></span></span></span>","position":{"start":{"line":21,"column":1,"offset":873},"end":{"line":21,"column":61,"offset":933}}}],"position":{"start":{"line":21,"column":1,"offset":873},"end":{"line":21,"column":61,"offset":933}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Which really doesn’t tell us much. However, if we now look at the imperative behavior, we could have the following theorem:","position":{"start":{"line":23,"column":1,"offset":935},"end":{"line":23,"column":124,"offset":1058}}}],"position":{"start":{"line":23,"column":1,"offset":935},"end":{"line":23,"column":124,"offset":1058}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"ocaml\"><pre class=\"language-ocaml\"><code class=\"language-ocaml\"><span class=\"token module variable\">If</span> <span class=\"token operator\">!</span>counter <span class=\"token operator\">===</span> m<span class=\"token punctuation\">,</span> <span class=\"token keyword\">for</span> some m<span class=\"token punctuation\">:</span> int<span class=\"token punctuation\">,</span> \n   <span class=\"token keyword\">then</span> executing tick n <span class=\"token punctuation\">(</span><span class=\"token keyword\">for</span> some n <span class=\"token punctuation\">:</span> int<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n   ensures that <span class=\"token operator\">!</span>counter <span class=\"token operator\">=</span> m <span class=\"token operator\">+</span> n</code></pre></div>","position":{"start":{"line":25,"column":1,"offset":1060},"end":{"line":29,"column":4,"offset":1187}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Where we’re essentially saying that, if we execute tick n once, we add n to the counter. This type of logic, where we assume something and, after executing some program, ensure something else, is called Hoare Logic, named after the man that invented QuickSort, among other things. It revolves around Hoare triples, which contain ","position":{"start":{"line":31,"column":1,"offset":1189},"end":{"line":31,"column":330,"offset":1518}}},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Preconditions","position":{"start":{"line":31,"column":332,"offset":1520},"end":{"line":31,"column":345,"offset":1533}}}],"position":{"start":{"line":31,"column":330,"offset":1518},"end":{"line":31,"column":347,"offset":1535}}},{"type":"text","value":", ","position":{"start":{"line":31,"column":347,"offset":1535},"end":{"line":31,"column":349,"offset":1537}}},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Executables,","position":{"start":{"line":31,"column":351,"offset":1539},"end":{"line":31,"column":363,"offset":1551}}}],"position":{"start":{"line":31,"column":349,"offset":1537},"end":{"line":31,"column":365,"offset":1553}}},{"type":"text","value":" and ","position":{"start":{"line":31,"column":365,"offset":1553},"end":{"line":31,"column":370,"offset":1558}}},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Postconditions,","position":{"start":{"line":31,"column":372,"offset":1560},"end":{"line":31,"column":387,"offset":1575}}}],"position":{"start":{"line":31,"column":370,"offset":1558},"end":{"line":31,"column":389,"offset":1577}}},{"type":"text","value":" in the following syntax:","position":{"start":{"line":31,"column":389,"offset":1577},"end":{"line":31,"column":414,"offset":1602}}}],"position":{"start":{"line":31,"column":1,"offset":1189},"end":{"line":31,"column":414,"offset":1602}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"raw","value":"<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">{</mo><mi>P</mi><mo stretchy=\"false\">}</mo><mi>e</mi><mo stretchy=\"false\">{</mo><mi>Q</mi><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">\\{P\\} e \\{Q\\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mclose\">}</span><span class=\"mord mathdefault\">e</span><span class=\"mopen\">{</span><span class=\"mord mathdefault\">Q</span><span class=\"mclose\">}</span></span></span></span></span>","position":{"start":{"line":33,"column":1,"offset":1604},"end":{"line":33,"column":18,"offset":1621}}}],"position":{"start":{"line":33,"column":1,"offset":1604},"end":{"line":33,"column":18,"offset":1621}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"where, in this case:","position":{"start":{"line":35,"column":1,"offset":1623},"end":{"line":35,"column":21,"offset":1643}}}],"position":{"start":{"line":35,"column":1,"offset":1623},"end":{"line":35,"column":21,"offset":1643}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"ocaml\"><pre class=\"language-ocaml\"><code class=\"language-ocaml\">P <span class=\"token operator\">=</span> <span class=\"token operator\">!</span>counter <span class=\"token operator\">===</span> m\nQ <span class=\"token operator\">=</span> <span class=\"token operator\">!</span>counter <span class=\"token operator\">===</span> m <span class=\"token operator\">+</span> n\ne <span class=\"token operator\">=</span> tick n\n\n<span class=\"token operator\">--></span> <span class=\"token punctuation\">{</span><span class=\"token operator\">!</span>counter <span class=\"token operator\">===</span> m <span class=\"token punctuation\">}</span> tick n <span class=\"token punctuation\">{</span><span class=\"token operator\">!</span>counter <span class=\"token operator\">===</span> m <span class=\"token operator\">+</span> n<span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":37,"column":1,"offset":1645},"end":{"line":43,"column":4,"offset":1761}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The way to look at these is that the pre-conditions restrict the starting state, the execution is the program being run, and the post-conditions restrict the ending state assuming the starting state. ","position":{"start":{"line":45,"column":1,"offset":1763},"end":{"line":45,"column":201,"offset":1963}}}],"position":{"start":{"line":45,"column":1,"offset":1763},"end":{"line":45,"column":201,"offset":1963}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"So, for example, here are some more valid Hoare Triples:","position":{"start":{"line":47,"column":1,"offset":1965},"end":{"line":47,"column":57,"offset":2021}}}],"position":{"start":{"line":47,"column":1,"offset":1965},"end":{"line":47,"column":57,"offset":2021}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"ocaml\"><pre class=\"language-ocaml\"><code class=\"language-ocaml\"><span class=\"token punctuation\">{</span>T<span class=\"token punctuation\">}</span> x <span class=\"token operator\">:=</span> <span class=\"token number\">5</span> <span class=\"token punctuation\">{</span><span class=\"token operator\">!</span>x <span class=\"token operator\">===</span><span class=\"token number\">5</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">{</span><span class=\"token operator\">!</span>x<span class=\"token operator\">===!</span>y<span class=\"token punctuation\">}</span> x<span class=\"token operator\">:=</span> <span class=\"token operator\">!</span>x <span class=\"token operator\">+</span> <span class=\"token number\">3</span> <span class=\"token punctuation\">{</span><span class=\"token operator\">!</span>x <span class=\"token operator\">===</span> <span class=\"token operator\">!</span>y <span class=\"token operator\">+</span> <span class=\"token number\">3</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">{</span><span class=\"token operator\">!</span>x <span class=\"token operator\">></span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">}</span> x <span class=\"token operator\">!=</span> <span class=\"token operator\">!</span>x <span class=\"token operator\">-</span> <span class=\"token number\">2</span> <span class=\"token operator\">+</span> <span class=\"token number\">3</span> <span class=\"token punctuation\">{</span><span class=\"token operator\">!</span>x <span class=\"token operator\">></span> <span class=\"token number\">1</span><span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":49,"column":1,"offset":2023},"end":{"line":53,"column":4,"offset":2129}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"We then define ","position":{"start":{"line":55,"column":1,"offset":2131},"end":{"line":55,"column":16,"offset":2146}}},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"valid","position":{"start":{"line":55,"column":17,"offset":2147},"end":{"line":55,"column":22,"offset":2152}}}],"position":{"start":{"line":55,"column":16,"offset":2146},"end":{"line":55,"column":23,"offset":2153}}},{"type":"text","value":" Hoare triples as Hoare triples that work in our computational framework, and ","position":{"start":{"line":55,"column":23,"offset":2153},"end":{"line":55,"column":101,"offset":2231}}},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"invalid","position":{"start":{"line":55,"column":102,"offset":2232},"end":{"line":55,"column":109,"offset":2239}}}],"position":{"start":{"line":55,"column":101,"offset":2231},"end":{"line":55,"column":110,"offset":2240}}},{"type":"text","value":" Hoare triples as those that do not. ","position":{"start":{"line":55,"column":110,"offset":2240},"end":{"line":55,"column":147,"offset":2277}}}],"position":{"start":{"line":55,"column":1,"offset":2131},"end":{"line":55,"column":147,"offset":2277}}},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[],"position":{"start":{"line":57,"column":1,"offset":2279},"end":{"line":57,"column":4,"offset":2282}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Strongest Post-Condition","position":{"start":{"line":59,"column":4,"offset":2287},"end":{"line":59,"column":28,"offset":2311}}}],"position":{"start":{"line":59,"column":1,"offset":2284},"end":{"line":59,"column":28,"offset":2311}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Now, when reasoning with these new Hoare triples, we now can prove many properties with a single pre-condition. (For example, we can prove, in the first part, that ","position":{"start":{"line":61,"column":1,"offset":2313},"end":{"line":61,"column":165,"offset":2477}}},{"type":"raw","value":"<code class=\"language-text\">!counter &gt; m-n</code>","position":{"start":{"line":61,"column":165,"offset":2477},"end":{"line":61,"column":181,"offset":2493}}},{"type":"text","value":" instead. However, as you can guess, proving this result makes no sense, when you’ve already proven the earlier statement. For this reason, we wish to figure out a way to define the so-called \"\"Strongest Post-Condition”:","position":{"start":{"line":61,"column":181,"offset":2493},"end":{"line":61,"column":401,"offset":2713}}}],"position":{"start":{"line":61,"column":1,"offset":2313},"end":{"line":61,"column":401,"offset":2713}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The Strongest Postcondition: The strongest thing, Q,  we can conclude about a program given pre-Condition P and executable e. ","position":{"start":{"line":65,"column":1,"offset":2718},"end":{"line":65,"column":127,"offset":2844}}}],"position":{"start":{"line":65,"column":1,"offset":2718},"end":{"line":65,"column":127,"offset":2844}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"We can prove that something is the strongest post-condition, Q, if:","position":{"start":{"line":67,"column":1,"offset":2846},"end":{"line":67,"column":68,"offset":2913}}}],"position":{"start":{"line":67,"column":1,"offset":2846},"end":{"line":67,"column":68,"offset":2913}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Pre-condition P and executable e lead to Q","position":{"start":{"line":69,"column":4,"offset":2918},"end":{"line":69,"column":46,"offset":2960}}}],"position":{"start":{"line":69,"column":1,"offset":2915},"end":{"line":69,"column":46,"offset":2960}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"For all valid post-conditions Q’, Q contains Q’ in some manner ( like how !counter === m + n contains the statement !counter > m - n)","position":{"start":{"line":70,"column":4,"offset":2964},"end":{"line":70,"column":137,"offset":3097}}}],"position":{"start":{"line":70,"column":1,"offset":2961},"end":{"line":70,"column":137,"offset":3097}}},{"type":"text","value":"\n"}],"position":{"start":{"line":69,"column":1,"offset":2915},"end":{"line":70,"column":137,"offset":3097}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Formally, this translates to the following:","position":{"start":{"line":72,"column":1,"offset":3099},"end":{"line":72,"column":44,"offset":3142}}}],"position":{"start":{"line":72,"column":1,"offset":3099},"end":{"line":72,"column":44,"offset":3142}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"raw","value":"<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">{</mo><mi>P</mi><mo stretchy=\"false\">}</mo><mi>e</mi><mo stretchy=\"false\">{</mo><mi>Q</mi><mo stretchy=\"false\">}</mo><mtext>, and </mtext><mi mathvariant=\"normal\">∀</mi><msup><mi>Q</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><mi>s</mi><mi mathvariant=\"normal\">.</mi><mi>t</mi><mi mathvariant=\"normal\">.</mi><mo stretchy=\"false\">{</mo><mi>P</mi><mo stretchy=\"false\">}</mo><mi>e</mi><mo stretchy=\"false\">{</mo><msup><mi>Q</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><mo stretchy=\"false\">}</mo><mo separator=\"true\">,</mo><msup><mi>Q</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><mo>⊂</mo><mi>Q</mi></mrow><annotation encoding=\"application/x-tex\">\\{P\\}e\\{Q\\} \\text{, and }\\forall Q&#x27;s.t. \\{P\\}e\\{Q&#x27;\\}, Q&#x27;\\subset Q</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.051892em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mclose\">}</span><span class=\"mord mathdefault\">e</span><span class=\"mopen\">{</span><span class=\"mord mathdefault\">Q</span><span class=\"mclose\">}</span><span class=\"mord text\"><span class=\"mord\">, and </span></span><span class=\"mord\">∀</span><span class=\"mord\"><span class=\"mord mathdefault\">Q</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.801892em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mord mathdefault\">s</span><span class=\"mord\">.</span><span class=\"mord mathdefault\">t</span><span class=\"mord\">.</span><span class=\"mopen\">{</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mclose\">}</span><span class=\"mord mathdefault\">e</span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathdefault\">Q</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.801892em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mclose\">}</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">Q</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.801892em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">⊂</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8777699999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">Q</span></span></span></span></span>","position":{"start":{"line":74,"column":1,"offset":3144},"end":{"line":74,"column":71,"offset":3214}}}],"position":{"start":{"line":74,"column":1,"offset":3144},"end":{"line":74,"column":71,"offset":3214}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"So, if we had the following sequence of valid Hoare Triples:","position":{"start":{"line":76,"column":1,"offset":3216},"end":{"line":76,"column":61,"offset":3276}}}],"position":{"start":{"line":76,"column":1,"offset":3216},"end":{"line":76,"column":61,"offset":3276}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"ocaml\"><pre class=\"language-ocaml\"><code class=\"language-ocaml\"><span class=\"token punctuation\">{</span>P<span class=\"token punctuation\">}</span> e <span class=\"token punctuation\">{</span>T<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">{</span>P<span class=\"token punctuation\">}</span> e <span class=\"token punctuation\">{</span><span class=\"token operator\">!</span>x <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">{</span>P<span class=\"token punctuation\">}</span> e <span class=\"token punctuation\">{</span><span class=\"token operator\">!</span>x<span class=\"token operator\">===</span><span class=\"token number\">10</span> <span class=\"token operator\">or</span> <span class=\"token operator\">!</span>x<span class=\"token operator\">===</span><span class=\"token number\">5</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">{</span>P<span class=\"token punctuation\">}</span> e <span class=\"token punctuation\">{</span><span class=\"token operator\">!</span>x<span class=\"token operator\">===</span><span class=\"token number\">10</span><span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":78,"column":1,"offset":3278},"end":{"line":83,"column":4,"offset":3357}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Then the last condition would have to be the strongest, as it’s validity implicitly makes the other statements valid as well, as it contains everything else.","position":{"start":{"line":85,"column":1,"offset":3359},"end":{"line":85,"column":158,"offset":3516}}}],"position":{"start":{"line":85,"column":1,"offset":3359},"end":{"line":85,"column":158,"offset":3516}}},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[],"position":{"start":{"line":87,"column":1,"offset":3518},"end":{"line":87,"column":4,"offset":3521}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"Weakest Pre-Conditions","position":{"start":{"line":89,"column":5,"offset":3527},"end":{"line":89,"column":27,"offset":3549}}}],"position":{"start":{"line":89,"column":1,"offset":3523},"end":{"line":89,"column":27,"offset":3549}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"With the strongest-post condition out of the way, there is a similar concept called a “weakest pre-condition” that we can look at. As an example, consider some sorting algorithm, like QuickSort. If we had some imperative implementation of it, it’d probably be a very buggy program, due to how hard it is to write if you haven’t memorized it and due to all of the sub-cases involved, but the strongest post-condition would be that we have a sorted array, as that property encapsulates the goal of such a program. ","position":{"start":{"line":91,"column":1,"offset":3551},"end":{"line":91,"column":513,"offset":4063}}}],"position":{"start":{"line":91,"column":1,"offset":3551},"end":{"line":91,"column":513,"offset":4063}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"However, we could easily prove our strongest post-condition using some simple pre-condition, like:","position":{"start":{"line":93,"column":1,"offset":4065},"end":{"line":93,"column":99,"offset":4163}}}],"position":{"start":{"line":93,"column":1,"offset":4065},"end":{"line":93,"column":99,"offset":4163}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"ocaml\"><pre class=\"language-ocaml\"><code class=\"language-ocaml\"><span class=\"token punctuation\">{</span><span class=\"token operator\">!</span>my<span class=\"token punctuation\">_</span>array <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span> sort my<span class=\"token punctuation\">_</span>array <span class=\"token punctuation\">{</span><span class=\"token operator\">!</span>my<span class=\"token punctuation\">_</span>array is the \n                  sorted version <span class=\"token keyword\">of</span> the old array<span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":95,"column":1,"offset":4165},"end":{"line":98,"column":4,"offset":4278}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Obviously, then, we have a problem, as we haven’t proven that our sorting algorithm sorts; only that it sorts with the empty list. So what can we do? We can assume a weaker pre-condition, like the following:","position":{"start":{"line":100,"column":1,"offset":4280},"end":{"line":100,"column":208,"offset":4487}}}],"position":{"start":{"line":100,"column":1,"offset":4280},"end":{"line":100,"column":208,"offset":4487}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"ocaml\"><pre class=\"language-ocaml\"><code class=\"language-ocaml\"><span class=\"token punctuation\">{</span><span class=\"token operator\">!</span>my<span class=\"token punctuation\">_</span>array is an array<span class=\"token punctuation\">}</span> sort my<span class=\"token punctuation\">_</span>array <span class=\"token punctuation\">{</span>my<span class=\"token punctuation\">_</span>array refers <span class=\"token keyword\">to</span>\n                     the sorted version <span class=\"token keyword\">of</span> the old array<span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":102,"column":1,"offset":4489},"end":{"line":105,"column":4,"offset":4617}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Now here, if this Hoare triple is valid, we have achieved the strongest result for any IO pair, proving our sorting algorithm, and its implementation, conclusively, as that is the weakest condition we can assume for our postcondition to hold (although you’d need to more formally encode the notion of a sorted array to put this into Coq or another symbolic logic tool)","position":{"start":{"line":107,"column":1,"offset":4619},"end":{"line":107,"column":369,"offset":4987}}}],"position":{"start":{"line":107,"column":1,"offset":4619},"end":{"line":107,"column":369,"offset":4987}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Thus, we’ve come up with the idea of the Weakest Pre-condition:","position":{"start":{"line":109,"column":1,"offset":4989},"end":{"line":109,"column":64,"offset":5052}}}],"position":{"start":{"line":109,"column":1,"offset":4989},"end":{"line":109,"column":64,"offset":5052}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The Weakest Pre-Condition is the most minimal thing you have to assume to make some post-condition hold","position":{"start":{"line":111,"column":1,"offset":5054},"end":{"line":111,"column":104,"offset":5157}}}],"position":{"start":{"line":111,"column":1,"offset":5054},"end":{"line":111,"column":104,"offset":5157}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Like the strongest post-condition, P , for something to be the weakest pre-condition we need the following:","position":{"start":{"line":113,"column":1,"offset":5159},"end":{"line":113,"column":108,"offset":5266}}}],"position":{"start":{"line":113,"column":1,"offset":5159},"end":{"line":113,"column":108,"offset":5266}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"P, along with the executable e, needs to lead to Q","position":{"start":{"line":115,"column":3,"offset":5270},"end":{"line":115,"column":53,"offset":5320}}}],"position":{"start":{"line":115,"column":1,"offset":5268},"end":{"line":115,"column":53,"offset":5320}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"For any other precondition P’ that also leads to Q given e, P’ must contain P in some way.","position":{"start":{"line":116,"column":3,"offset":5323},"end":{"line":116,"column":93,"offset":5413}}}],"position":{"start":{"line":116,"column":1,"offset":5321},"end":{"line":116,"column":93,"offset":5413}}},{"type":"text","value":"\n"}],"position":{"start":{"line":115,"column":1,"offset":5268},"end":{"line":116,"column":93,"offset":5413}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Formally, this looks like the following:","position":{"start":{"line":118,"column":1,"offset":5415},"end":{"line":118,"column":41,"offset":5455}}}],"position":{"start":{"line":118,"column":1,"offset":5415},"end":{"line":118,"column":41,"offset":5455}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"raw","value":"<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">{</mo><mi>P</mi><mo stretchy=\"false\">}</mo><mi>e</mi><mo stretchy=\"false\">{</mo><mi>Q</mi><mo stretchy=\"false\">}</mo><mtext> and </mtext><mi mathvariant=\"normal\">∀</mi><mtext> pre-conditions </mtext><msup><mi>P</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><mi>s</mi><mi mathvariant=\"normal\">.</mi><mi>t</mi><mi mathvariant=\"normal\">.</mi><mo stretchy=\"false\">{</mo><msup><mi>P</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><mo stretchy=\"false\">}</mo><mi>e</mi><mo stretchy=\"false\">{</mo><mi>Q</mi><mo stretchy=\"false\">}</mo><mo separator=\"true\">,</mo><mi>P</mi><mo>⊂</mo><msup><mi>P</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup></mrow><annotation encoding=\"application/x-tex\">\\{P\\}e\\{Q\\} \\text{ and } \\forall \\text{ pre-conditions } P&#x27; s.t. \\{P&#x27;\\}e \\{Q\\}, P \\subset P&#x27;</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.051892em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mclose\">}</span><span class=\"mord mathdefault\">e</span><span class=\"mopen\">{</span><span class=\"mord mathdefault\">Q</span><span class=\"mclose\">}</span><span class=\"mord text\"><span class=\"mord\"> and </span></span><span class=\"mord\">∀</span><span class=\"mord text\"><span class=\"mord\"> pre-conditions </span></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.801892em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mord mathdefault\">s</span><span class=\"mord\">.</span><span class=\"mord mathdefault\">t</span><span class=\"mord\">.</span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.801892em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mclose\">}</span><span class=\"mord mathdefault\">e</span><span class=\"mopen\">{</span><span class=\"mord mathdefault\">Q</span><span class=\"mclose\">}</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">⊂</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.801892em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.801892em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span></span></span></span></span>","position":{"start":{"line":120,"column":1,"offset":5457},"end":{"line":120,"column":97,"offset":5553}}}],"position":{"start":{"line":120,"column":1,"offset":5457},"end":{"line":120,"column":97,"offset":5553}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Generally, the closer a function is to real-world usage, the harder this process becomes ( SEE: How do you define what a stack-overflow is formally? ), but this still allows us to reason through our imperative programs in a manner that makes sense, so we’ll use it here.","position":{"start":{"line":122,"column":1,"offset":5555},"end":{"line":122,"column":271,"offset":5825}}}],"position":{"start":{"line":122,"column":1,"offset":5555},"end":{"line":122,"column":271,"offset":5825}}},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[],"position":{"start":{"line":124,"column":1,"offset":5827},"end":{"line":124,"column":4,"offset":5830}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Lastly, an example of this sort of proof.","position":{"start":{"line":126,"column":4,"offset":5835},"end":{"line":126,"column":45,"offset":5876}}}],"position":{"start":{"line":126,"column":1,"offset":5832},"end":{"line":126,"column":45,"offset":5876}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Let’s say we had the following, imperative, version of factorial:","position":{"start":{"line":128,"column":1,"offset":5878},"end":{"line":128,"column":66,"offset":5943}}}],"position":{"start":{"line":128,"column":1,"offset":5878},"end":{"line":128,"column":66,"offset":5943}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"ocaml\"><pre class=\"language-ocaml\"><code class=\"language-ocaml\"><span class=\"token keyword\">let</span> fac <span class=\"token punctuation\">(</span> n <span class=\"token punctuation\">:</span> int <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">(</span> r <span class=\"token punctuation\">:</span> int ref <span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> \n   <span class=\"token keyword\">let</span> k <span class=\"token operator\">=</span> ref <span class=\"token number\">1</span> <span class=\"token keyword\">in</span>\n     r <span class=\"token operator\">:=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n   <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>k <span class=\"token operator\">&lt;</span> n<span class=\"token punctuation\">)</span> <span class=\"token keyword\">do</span>\n       k <span class=\"token operator\">:=</span> <span class=\"token operator\">!</span>k <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n       r <span class=\"token operator\">:=</span> <span class=\"token operator\">!</span>r <span class=\"token operator\">*</span> <span class=\"token operator\">!</span>k<span class=\"token punctuation\">;</span>\n   <span class=\"token keyword\">done</span></code></pre></div>","position":{"start":{"line":130,"column":1,"offset":5945},"end":{"line":138,"column":4,"offset":6099}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Where the result is stored in the int ref r, so our function has the type signature ","position":{"start":{"line":140,"column":1,"offset":6101},"end":{"line":140,"column":85,"offset":6185}}},{"type":"raw","value":"<code class=\"language-text\">fac : int -&gt; int ref -&gt; unit</code>","position":{"start":{"line":140,"column":85,"offset":6185},"end":{"line":140,"column":115,"offset":6215}}},{"type":"text","value":" . ","position":{"start":{"line":140,"column":115,"offset":6215},"end":{"line":140,"column":118,"offset":6218}}}],"position":{"start":{"line":140,"column":1,"offset":6101},"end":{"line":140,"column":118,"offset":6218}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Obviously, we could prove the following, very important, and very useful theorem about the Functional Behavior of fac:","position":{"start":{"line":142,"column":1,"offset":6220},"end":{"line":142,"column":119,"offset":6338}}}],"position":{"start":{"line":142,"column":1,"offset":6220},"end":{"line":142,"column":119,"offset":6338}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"ocaml\"><pre class=\"language-ocaml\"><code class=\"language-ocaml\"><span class=\"token module variable\">Forall</span> n <span class=\"token punctuation\">:</span> int <span class=\"token operator\">and</span> r <span class=\"token punctuation\">:</span> int ref<span class=\"token punctuation\">,</span> fac n r <span class=\"token operator\">===</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>","position":{"start":{"line":144,"column":1,"offset":6340},"end":{"line":146,"column":4,"offset":6399}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"However, and jokes aside, we’d rather like to prove the following theorem, which conveys the imperative behavior of fac:","position":{"start":{"line":148,"column":1,"offset":6401},"end":{"line":148,"column":121,"offset":6521}}}],"position":{"start":{"line":148,"column":1,"offset":6401},"end":{"line":148,"column":121,"offset":6521}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"ocaml\"><pre class=\"language-ocaml\"><code class=\"language-ocaml\"><span class=\"token module variable\">If</span> <span class=\"token punctuation\">{</span>n <span class=\"token operator\">>=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">then</span> <span class=\"token keyword\">when</span> we executre fac n r <span class=\"token punctuation\">(</span><span class=\"token keyword\">where</span> n <span class=\"token punctuation\">:</span> int <span class=\"token operator\">and</span> r <span class=\"token punctuation\">:</span> int ref<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> \n  we want <span class=\"token punctuation\">{</span><span class=\"token operator\">!</span>r <span class=\"token operator\">===</span> n<span class=\"token operator\">!</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">.</span></code></pre></div>","position":{"start":{"line":150,"column":1,"offset":6523},"end":{"line":153,"column":4,"offset":6635}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"In Hoare-Triple Form, that’d be:","position":{"start":{"line":155,"column":1,"offset":6637},"end":{"line":155,"column":33,"offset":6669}}}],"position":{"start":{"line":155,"column":1,"offset":6637},"end":{"line":155,"column":33,"offset":6669}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"raw","value":"<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">{</mo><mi>n</mi><mo>≥</mo><mn>1</mn><mo stretchy=\"false\">}</mo><mtext>fac n r</mtext><mo stretchy=\"false\">{</mo><mo stretchy=\"false\">!</mo><mi>r</mi><mo>=</mo><mi>n</mi><mo stretchy=\"false\">!</mo><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">\\{n \\geq 1 \\} \\text{fac n r} \\{ !r = n!\\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≥</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">}</span><span class=\"mord text\"><span class=\"mord\">fac n r</span></span><span class=\"mopen\">{</span><span class=\"mclose\">!</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mclose\">!</span><span class=\"mclose\">}</span></span></span></span></span>","position":{"start":{"line":157,"column":1,"offset":6671},"end":{"line":157,"column":46,"offset":6716}}}],"position":{"start":{"line":157,"column":1,"offset":6671},"end":{"line":157,"column":46,"offset":6716}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"To prove this, what we’re going to do is called ","position":{"start":{"line":159,"column":1,"offset":6718},"end":{"line":159,"column":49,"offset":6766}}},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"forward reasoning","position":{"start":{"line":159,"column":51,"offset":6768},"end":{"line":159,"column":68,"offset":6785}}}],"position":{"start":{"line":159,"column":49,"offset":6766},"end":{"line":159,"column":70,"offset":6787}}},{"type":"text","value":". We’re going to start with our pre-condition, n≥1, and move it down each and every line of our program, until we get to the end and (hopefully) prove the post-condition.","position":{"start":{"line":159,"column":70,"offset":6787},"end":{"line":159,"column":240,"offset":6957}}}],"position":{"start":{"line":159,"column":1,"offset":6718},"end":{"line":159,"column":240,"offset":6957}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"ocaml\"><pre class=\"language-ocaml\"><code class=\"language-ocaml\"><span class=\"token punctuation\">{</span>n <span class=\"token operator\">>=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">let</span> k <span class=\"token operator\">=</span> ref <span class=\"token number\">1</span> <span class=\"token keyword\">in</span>\n<span class=\"token punctuation\">{</span>n <span class=\"token operator\">>=</span> <span class=\"token number\">1</span> <span class=\"token operator\">and</span> <span class=\"token operator\">!</span>k <span class=\"token operator\">===</span> <span class=\"token number\">1</span><span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":161,"column":1,"offset":6959},"end":{"line":165,"column":4,"offset":7019}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Here, as we define a new variable, we need to include that in our context, as it’s a new condition we can assume for the rest of the program.","position":{"start":{"line":167,"column":1,"offset":7021},"end":{"line":167,"column":142,"offset":7162}}}],"position":{"start":{"line":167,"column":1,"offset":7021},"end":{"line":167,"column":142,"offset":7162}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"ocaml\"><pre class=\"language-ocaml\"><code class=\"language-ocaml\"><span class=\"token punctuation\">{</span>n <span class=\"token operator\">>=</span> <span class=\"token number\">1</span> <span class=\"token operator\">and</span> <span class=\"token operator\">!</span>l <span class=\"token operator\">===</span> <span class=\"token number\">1</span><span class=\"token punctuation\">}</span>\nr <span class=\"token operator\">:=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">{</span>n <span class=\"token operator\">>=</span> <span class=\"token number\">1</span> <span class=\"token operator\">and</span> <span class=\"token operator\">!</span>k <span class=\"token operator\">===</span> <span class=\"token number\">1</span> <span class=\"token operator\">and</span> <span class=\"token operator\">!</span>r <span class=\"token operator\">===</span> <span class=\"token number\">1</span><span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":169,"column":1,"offset":7164},"end":{"line":173,"column":4,"offset":7241}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Again, here we re-define the input, as the input is a reference, and so we have a new-precondition for the rest of the program.","position":{"start":{"line":175,"column":1,"offset":7243},"end":{"line":175,"column":128,"offset":7370}}}],"position":{"start":{"line":175,"column":1,"offset":7243},"end":{"line":175,"column":128,"offset":7370}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"ocaml\"><pre class=\"language-ocaml\"><code class=\"language-ocaml\"><span class=\"token punctuation\">{</span>n <span class=\"token operator\">>=</span> <span class=\"token number\">1</span> <span class=\"token operator\">and</span> <span class=\"token operator\">!</span>k <span class=\"token operator\">===</span> <span class=\"token number\">1</span> <span class=\"token operator\">and</span> <span class=\"token operator\">!</span>r <span class=\"token operator\">===</span> <span class=\"token number\">1</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">{</span> <span class=\"token module variable\">Loop</span> invariant<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token operator\">!</span>r <span class=\"token operator\">===</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>k<span class=\"token punctuation\">)</span><span class=\"token operator\">!</span> <span class=\"token operator\">and</span> <span class=\"token number\">0</span> <span class=\"token operator\">&lt;</span> <span class=\"token operator\">!</span>k <span class=\"token operator\">&lt;=</span> n <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n   <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>k <span class=\"token operator\">&lt;</span> n <span class=\"token punctuation\">)</span> <span class=\"token keyword\">do</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></code></pre></div>","position":{"start":{"line":177,"column":1,"offset":7372},"end":{"line":182,"column":4,"offset":7496}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Before I continue, we’ve now reached a do-while loop in our program, and it’s not entirely obvious how to proceed. What we need to do here is we need to define a so-called loop invariant, or something that holds after each and every execution of the loop.","position":{"start":{"line":184,"column":1,"offset":7498},"end":{"line":184,"column":256,"offset":7753}}}],"position":{"start":{"line":184,"column":1,"offset":7498},"end":{"line":184,"column":256,"offset":7753}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Loop invariant: Something that stays the same at the beginning and end of every loop","position":{"start":{"line":186,"column":1,"offset":7755},"end":{"line":186,"column":85,"offset":7839}}}],"position":{"start":{"line":186,"column":1,"offset":7755},"end":{"line":186,"column":85,"offset":7839}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"This is really similar to our proofs by induction for functional languages, where we assume P","position":{"start":{"line":188,"column":1,"offset":7841},"end":{"line":188,"column":94,"offset":7934}}},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"k-1 and then go to P","position":{"start":{"line":188,"column":95,"offset":7935},"end":{"line":188,"column":115,"offset":7955}}}],"position":{"start":{"line":188,"column":94,"offset":7934},"end":{"line":188,"column":116,"offset":7956}}},{"type":"text","value":"k to show something. ","position":{"start":{"line":188,"column":116,"offset":7956},"end":{"line":188,"column":137,"offset":7977}}}],"position":{"start":{"line":188,"column":1,"offset":7841},"end":{"line":188,"column":137,"offset":7977}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"If we can assume the loop invariant at the start, and show that the loop invariant holds across each iteration, then we’re get it at the end for free.","position":{"start":{"line":190,"column":1,"offset":7979},"end":{"line":190,"column":151,"offset":8129}}}],"position":{"start":{"line":190,"column":1,"offset":7979},"end":{"line":190,"column":151,"offset":8129}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Now, this particular loop invariant does hold at the start, as 1! = 1 and as !k ==1, which is less than or equal to n and n is greater than 0, so we’re set here.","position":{"start":{"line":192,"column":1,"offset":8131},"end":{"line":192,"column":162,"offset":8292}}}],"position":{"start":{"line":192,"column":1,"offset":8131},"end":{"line":192,"column":162,"offset":8292}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"So, for this program, we had the above loop invariant. Now, when we proceed, we’ll have the following:","position":{"start":{"line":194,"column":1,"offset":8294},"end":{"line":194,"column":103,"offset":8396}}}],"position":{"start":{"line":194,"column":1,"offset":8294},"end":{"line":194,"column":103,"offset":8396}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"ocaml\"><pre class=\"language-ocaml\"><code class=\"language-ocaml\"><span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>k <span class=\"token operator\">&lt;</span> n <span class=\"token punctuation\">)</span> <span class=\"token keyword\">do</span>\n <span class=\"token punctuation\">{</span><span class=\"token operator\">!</span>k <span class=\"token operator\">&lt;</span> n <span class=\"token operator\">and</span> <span class=\"token operator\">!</span>r <span class=\"token operator\">===</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>k<span class=\"token punctuation\">)</span><span class=\"token operator\">!</span> <span class=\"token operator\">and</span> <span class=\"token number\">0</span> <span class=\"token operator\">&lt;</span> <span class=\"token operator\">!</span>k <span class=\"token operator\">&lt;=</span> n <span class=\"token punctuation\">}</span>\n i<span class=\"token punctuation\">.</span>e<span class=\"token punctuation\">.</span> <span class=\"token punctuation\">{</span><span class=\"token number\">0</span> <span class=\"token operator\">&lt;</span> <span class=\"token operator\">!</span>k <span class=\"token operator\">&lt;</span> n <span class=\"token operator\">and</span> <span class=\"token operator\">!</span>r <span class=\"token operator\">===</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>k<span class=\"token punctuation\">)</span><span class=\"token operator\">!</span><span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":196,"column":1,"offset":8398},"end":{"line":200,"column":4,"offset":8509}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Then:","position":{"start":{"line":202,"column":1,"offset":8511},"end":{"line":202,"column":6,"offset":8516}}}],"position":{"start":{"line":202,"column":1,"offset":8511},"end":{"line":202,"column":6,"offset":8516}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"ocaml\"><pre class=\"language-ocaml\"><code class=\"language-ocaml\"><span class=\"token punctuation\">{</span><span class=\"token number\">0</span> <span class=\"token operator\">&lt;</span> <span class=\"token operator\">!</span>k <span class=\"token operator\">&lt;</span> n <span class=\"token operator\">and</span> <span class=\"token operator\">!</span>r <span class=\"token operator\">===</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>k<span class=\"token punctuation\">)</span><span class=\"token operator\">!</span><span class=\"token punctuation\">}</span>\nk <span class=\"token operator\">:=</span> <span class=\"token operator\">!</span>k <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">{</span><span class=\"token number\">0</span> <span class=\"token operator\">&lt;</span> <span class=\"token operator\">!</span>k <span class=\"token operator\">&lt;=</span> n <span class=\"token operator\">and</span> <span class=\"token operator\">!</span>r <span class=\"token operator\">===</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>k <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token operator\">!</span><span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":204,"column":1,"offset":8518},"end":{"line":208,"column":4,"offset":8608}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"as, now that k is incremented, r must be one less than k’s factorial","position":{"start":{"line":210,"column":1,"offset":8610},"end":{"line":210,"column":69,"offset":8678}}}],"position":{"start":{"line":210,"column":1,"offset":8610},"end":{"line":210,"column":69,"offset":8678}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Then:","position":{"start":{"line":212,"column":1,"offset":8680},"end":{"line":212,"column":6,"offset":8685}}}],"position":{"start":{"line":212,"column":1,"offset":8680},"end":{"line":212,"column":6,"offset":8685}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"ocaml\"><pre class=\"language-ocaml\"><code class=\"language-ocaml\"><span class=\"token punctuation\">{</span><span class=\"token number\">0</span> <span class=\"token operator\">&lt;</span> <span class=\"token operator\">!</span>k <span class=\"token operator\">&lt;=</span> n <span class=\"token operator\">and</span> <span class=\"token operator\">!</span>r <span class=\"token operator\">===</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>k <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token operator\">!</span><span class=\"token punctuation\">}</span>\nr <span class=\"token operator\">:=</span> <span class=\"token operator\">!</span>r <span class=\"token operator\">*</span> <span class=\"token operator\">!</span>k\n<span class=\"token punctuation\">{</span><span class=\"token operator\">!</span>r <span class=\"token operator\">===</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>k <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token operator\">!</span> <span class=\"token operator\">*</span> <span class=\"token operator\">!</span>k <span class=\"token operator\">===</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>k<span class=\"token punctuation\">)</span><span class=\"token operator\">!</span> <span class=\"token operator\">and</span> <span class=\"token number\">0</span> <span class=\"token operator\">&lt;</span> <span class=\"token operator\">!</span>k <span class=\"token operator\">&lt;=</span> n<span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":214,"column":1,"offset":8687},"end":{"line":218,"column":4,"offset":8797}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"And notice that the loop-invariant still holds! Thus, we’re able to keep it, and can use it to finish off our proof.","position":{"start":{"line":220,"column":1,"offset":8799},"end":{"line":220,"column":117,"offset":8915}}}],"position":{"start":{"line":220,"column":1,"offset":8799},"end":{"line":220,"column":117,"offset":8915}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Now, we’re exiting the loop, so the while condition must be false. Thus:","position":{"start":{"line":222,"column":1,"offset":8917},"end":{"line":222,"column":73,"offset":8989}}}],"position":{"start":{"line":222,"column":1,"offset":8917},"end":{"line":222,"column":73,"offset":8989}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"ocaml\"><pre class=\"language-ocaml\"><code class=\"language-ocaml\"><span class=\"token punctuation\">{</span><span class=\"token operator\">!</span>r <span class=\"token operator\">===</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>k<span class=\"token punctuation\">)</span><span class=\"token operator\">!</span> <span class=\"token operator\">and</span> <span class=\"token number\">0</span> <span class=\"token operator\">&lt;</span> <span class=\"token operator\">!</span>k <span class=\"token operator\">&lt;=</span> n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">done</span>\n<span class=\"token punctuation\">{</span><span class=\"token operator\">!</span>r <span class=\"token operator\">===</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>k<span class=\"token punctuation\">)</span><span class=\"token operator\">!</span> <span class=\"token operator\">and</span> <span class=\"token number\">0</span> <span class=\"token operator\">&lt;</span> <span class=\"token operator\">!</span>k <span class=\"token operator\">&lt;=</span> n <span class=\"token operator\">and</span> not <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>k <span class=\"token operator\">&lt;</span> n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">{</span><span class=\"token operator\">!</span>r <span class=\"token operator\">===</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>k<span class=\"token punctuation\">)</span><span class=\"token operator\">!</span> <span class=\"token operator\">and</span> <span class=\"token number\">0</span> <span class=\"token operator\">&lt;</span> <span class=\"token operator\">!</span>k <span class=\"token operator\">&lt;=</span> n <span class=\"token operator\">and</span> <span class=\"token operator\">!</span>k <span class=\"token operator\">>=</span> n<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">{</span><span class=\"token operator\">!</span>r <span class=\"token operator\">===</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>k<span class=\"token punctuation\">)</span><span class=\"token operator\">!</span> <span class=\"token operator\">and</span> <span class=\"token operator\">!</span>k <span class=\"token operator\">===</span> n<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">{</span><span class=\"token operator\">!</span>r <span class=\"token operator\">===</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>n<span class=\"token punctuation\">)</span><span class=\"token operator\">!</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> through substitution<span class=\"token operator\">!</span></code></pre></div>","position":{"start":{"line":224,"column":1,"offset":8991},"end":{"line":231,"column":4,"offset":9196}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Thus, we’re able to prove this fact, though a few key details are of note:","position":{"start":{"line":233,"column":1,"offset":9198},"end":{"line":233,"column":75,"offset":9272}}}],"position":{"start":{"line":233,"column":1,"offset":9198},"end":{"line":233,"column":75,"offset":9272}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Like in most of the proofs we have, the proof structure is largely mechanical, making the majority of it a walk in the park, so long as we remember to condense our assumptions","position":{"start":{"line":235,"column":3,"offset":9276},"end":{"line":235,"column":178,"offset":9451}}}],"position":{"start":{"line":235,"column":1,"offset":9274},"end":{"line":235,"column":178,"offset":9451}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Finding loop invariants, like finding the inductive structure in a problem, can be a very daunting and creative task when presented with an unknown function. We’ll need to be careful to make sure it plays out, as otherwise we’re going to have verification troubles.","position":{"start":{"line":236,"column":3,"offset":9454},"end":{"line":236,"column":268,"offset":9719}}}],"position":{"start":{"line":236,"column":1,"offset":9452},"end":{"line":236,"column":268,"offset":9719}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"As you might have guessed, instead of going forwards through a program, we can also go backwards. This is known as ","position":{"start":{"line":237,"column":3,"offset":9722},"end":{"line":237,"column":118,"offset":9837}}},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"backwards reasoning","position":{"start":{"line":237,"column":120,"offset":9839},"end":{"line":237,"column":139,"offset":9858}}}],"position":{"start":{"line":237,"column":118,"offset":9837},"end":{"line":237,"column":141,"offset":9860}}},{"type":"text","value":", and so we’d start with the post-condition and go to a valid pre-condition. This can lead to simpler proofs, but it’s key to remember that this form of reasoning can really take more time to work with, and is a bit less intuitive than forward reasoning.","position":{"start":{"line":237,"column":141,"offset":9860},"end":{"line":237,"column":395,"offset":10114}}}],"position":{"start":{"line":237,"column":1,"offset":9720},"end":{"line":237,"column":395,"offset":10114}}},{"type":"text","value":"\n"}],"position":{"start":{"line":235,"column":1,"offset":9274},"end":{"line":237,"column":395,"offset":10114}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Lastly, in Lecture 19, Cyrus goes through all of this again, but with one more full example and a half-completed example showing how this could be useful for a more interesting program, reversing an array in-place. For the sake of brevity, I’ll simply type up the former proof to make it easier to look at:","position":{"start":{"line":239,"column":1,"offset":10116},"end":{"line":239,"column":307,"offset":10422}}}],"position":{"start":{"line":239,"column":1,"offset":10116},"end":{"line":239,"column":307,"offset":10422}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"ocaml\"><pre class=\"language-ocaml\"><code class=\"language-ocaml\"><span class=\"token keyword\">let</span> max <span class=\"token punctuation\">(</span> xs<span class=\"token punctuation\">:</span> int array <span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> \n    <span class=\"token punctuation\">{</span> length<span class=\"token punctuation\">(</span>xs<span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">0</span> <span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> ref <span class=\"token number\">0</span> <span class=\"token keyword\">in</span>\n    <span class=\"token punctuation\">{</span>length<span class=\"token punctuation\">(</span>xs<span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">0</span> <span class=\"token operator\">and</span> <span class=\"token operator\">!</span>i <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">let</span> max <span class=\"token operator\">=</span> ref <span class=\"token module variable\">Int</span><span class=\"token punctuation\">.</span><span class=\"token module variable\">MinInt</span> <span class=\"token keyword\">in</span> \n    <span class=\"token punctuation\">{</span>length<span class=\"token punctuation\">(</span>xs<span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">0</span> <span class=\"token operator\">and</span> <span class=\"token operator\">!</span>i <span class=\"token operator\">===</span> <span class=\"token number\">0</span> <span class=\"token operator\">and</span> <span class=\"token operator\">!</span>max <span class=\"token operator\">===</span> <span class=\"token module variable\">Int</span><span class=\"token punctuation\">.</span><span class=\"token module variable\">MinInt</span><span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">{</span><span class=\"token module variable\">LoopInvariant</span><span class=\"token punctuation\">:</span> <span class=\"token operator\">!</span>max <span class=\"token operator\">===</span> greatest <span class=\"token keyword\">of</span> xs<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">,</span>xs<span class=\"token punctuation\">[</span><span class=\"token operator\">!</span>i<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">and</span> <span class=\"token operator\">!</span>i <span class=\"token operator\">&lt;=</span> length<span class=\"token punctuation\">(</span>xs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>i <span class=\"token operator\">&lt;</span> length<span class=\"token punctuation\">(</span>xs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">do</span>\n    <span class=\"token punctuation\">{</span><span class=\"token operator\">!</span>max <span class=\"token operator\">===</span> greatest <span class=\"token keyword\">of</span> xs<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">,</span>xs<span class=\"token punctuation\">[</span><span class=\"token operator\">!</span>i<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">and</span> <span class=\"token operator\">!</span>i <span class=\"token operator\">&lt;</span> length<span class=\"token punctuation\">(</span>xs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">let</span> ith <span class=\"token operator\">=</span> xs<span class=\"token punctuation\">.</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span> <span class=\"token keyword\">in</span>\n    <span class=\"token punctuation\">{</span>ith <span class=\"token operator\">===</span> xs<span class=\"token punctuation\">[</span><span class=\"token operator\">!</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">and</span> <span class=\"token operator\">!</span>max <span class=\"token operator\">===</span> greatest <span class=\"token keyword\">of</span> xs<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">,</span>xs<span class=\"token punctuation\">[</span><span class=\"token operator\">!</span>i<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">and</span> <span class=\"token operator\">!</span>i <span class=\"token operator\">&lt;</span> length<span class=\"token punctuation\">(</span>xs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>ith <span class=\"token operator\">></span> <span class=\"token operator\">!</span>max<span class=\"token punctuation\">)</span> <span class=\"token keyword\">then</span>\n      <span class=\"token punctuation\">{</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> <span class=\"token operator\">and</span> ith <span class=\"token operator\">></span> <span class=\"token operator\">!</span>max<span class=\"token punctuation\">}</span>\n      <span class=\"token operator\">!</span>max <span class=\"token operator\">:=</span> ith\n      <span class=\"token punctuation\">{</span><span class=\"token operator\">!</span>max <span class=\"token operator\">===</span> ith <span class=\"token operator\">and</span> the rest<span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">else</span> \n       <span class=\"token punctuation\">{</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> <span class=\"token operator\">and</span> ith <span class=\"token operator\">&lt;=</span> <span class=\"token operator\">!</span>max<span class=\"token punctuation\">}</span>\n       <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n    <span class=\"token punctuation\">{</span><span class=\"token operator\">!</span>max <span class=\"token operator\">==</span> greatest <span class=\"token keyword\">of</span> xs<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> xs<span class=\"token punctuation\">[</span><span class=\"token operator\">!</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span>\n    i <span class=\"token operator\">:=</span> <span class=\"token operator\">!</span>i <span class=\"token operator\">+</span> <span class=\"token number\">1</span>\n    <span class=\"token punctuation\">{</span><span class=\"token operator\">!</span>max <span class=\"token operator\">===</span> greatest <span class=\"token keyword\">of</span> xs<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> xs<span class=\"token punctuation\">[</span><span class=\"token operator\">!</span>i<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">done</span>\n<span class=\"token punctuation\">{</span><span class=\"token operator\">!</span>max <span class=\"token operator\">===</span> greatest <span class=\"token keyword\">of</span> xs<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> xs<span class=\"token punctuation\">[</span><span class=\"token operator\">!</span>i<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">^</span> <span class=\"token operator\">!</span>i <span class=\"token operator\">>=</span> length<span class=\"token punctuation\">(</span>xs<span class=\"token punctuation\">)</span> <span class=\"token operator\">and</span> <span class=\"token operator\">!</span>i <span class=\"token operator\">&lt;=</span> length<span class=\"token punctuation\">(</span>xs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">{</span><span class=\"token operator\">!</span>max <span class=\"token operator\">===</span> greatest <span class=\"token keyword\">of</span> xs<span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":241,"column":1,"offset":10424},"end":{"line":266,"column":4,"offset":11283}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Again, this proof isn’t hard per-se (minus creating and maintaining the loop invariant), but it’s a great one to do to make sure you’re ready for the final, should this appear on it.","position":{"start":{"line":268,"column":1,"offset":11285},"end":{"line":268,"column":183,"offset":11467}}}],"position":{"start":{"line":268,"column":1,"offset":11285},"end":{"line":268,"column":183,"offset":11467}}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":268,"column":183,"offset":11467}}}}